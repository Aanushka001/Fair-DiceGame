(()=>{var e={};e.id=910,e.ids=[220,636,910],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},656:e=>{"use strict";e.exports=import("wagmi/chains")},977:e=>{"use strict";e.exports=import("wagmi")},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},1428:e=>{"use strict";e.exports=import("axios")},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},2960:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>d});var s=a(8732),n=a(2015),i=a(4233),l=a(5240),c=a(4211),o=a(6021),u=e([c]);function d(){let{user:e,logout:t}=(0,n.useContext)(l.A),a=(0,i.useRouter)(),[r,u]=(0,n.useState)(10),[d,h]=(0,n.useState)(1e3),[x,m]=(0,n.useState)(null),[p,g]=(0,n.useState)(""),[j,b]=(0,n.useState)(!1),P=async()=>{if(!e?.token){alert("Invalid session. Please log in again."),t();return}if(r<=0||r>d){g("Invalid bet amount");return}b(!0),g("");try{let t=await (0,c.z)(e.userId,r,e.token);m(t),h(t.balance),localStorage.setItem("balance",t.balance)}catch(e){g(e.response?.data?.error||"Error rolling dice")}finally{b(!1)}};return(0,s.jsxs)("div",{className:"game-container",children:[(0,s.jsx)("h1",{className:"game-title",children:"\uD83C\uDFB2 Fair Dice Game"}),e&&(0,s.jsxs)("p",{className:"text-center text-lg text-gray-300",children:["\uD83D\uDC64 ",e.username]}),(0,s.jsxs)("p",{className:"game-balance",children:["\uD83D\uDCB0 Balance: $",d]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300",children:["Bet Amount",(0,s.jsx)("input",{type:"number",value:r,onChange:e=>u(Number(e.target.value)),className:"game-input",min:"1",max:d})]}),p&&(0,s.jsx)("p",{className:"text-red-500 text-center",children:p}),(0,s.jsx)("button",{onClick:P,disabled:j,className:"game-button",children:j?"Rolling...":"Roll Dice"})]}),x&&(0,s.jsxs)("div",{className:"game-result",children:[(0,s.jsxs)("p",{className:"text-lg",children:["\uD83C\uDFB2 Dice Roll: ",x.rollResult]}),(0,s.jsx)("p",{className:`text-xl ${x.winningAmount>0?"game-win":"game-lose"}`,children:x.winningAmount>0?`ðŸŽ‰ You Won: $${x.winningAmount}`:`ðŸ˜ž You Lost: $${Math.abs(x.winningAmount)}`}),(0,s.jsxs)("p",{className:"text-lg",children:["\uD83D\uDCB0 New Balance: $",d]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["\uD83D\uDD10 Hash: ",x.hash]})]}),(0,s.jsxs)("div",{className:"mt-6 space-x-4 text-center",children:[(0,s.jsx)("button",{onClick:()=>a.push("/auth/login"),className:"text-blue-500 hover:underline",children:"Go to Login"}),(0,s.jsx)("button",{onClick:()=>a.push("/auth/register"),className:"text-blue-500 hover:underline",children:"Go to Register"}),(0,s.jsx)("button",{onClick:t,className:"text-red-500 hover:underline",children:"Logout"})]}),(0,s.jsx)(o.A,{})]})}c=(u.then?(await u)():u)[0],r()}catch(e){r(e)}})},3873:e=>{"use strict";e.exports=require("path")},3959:()=>{},4075:e=>{"use strict";e.exports=require("zlib")},4211:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{z:()=>i});var s=a(1428),n=e([s]);s=(n.then?(await n)():n)[0];let i=async(e,t,a)=>{let r=await fetch("http://localhost:5000/api/game/roll",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({userId:e,betAmount:t})});if(!r.ok)throw Error("Invalid token");return r.json()};r()}catch(e){r(e)}})},5240:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,O:()=>l});var r=a(8732),s=a(2015),n=a(4233);let i=(0,s.createContext)(),l=({children:e})=>{let[t,a]=(0,s.useState)(null);return(0,n.useRouter)(),(0,s.useEffect)(()=>{},[]),(0,r.jsx)(i.Provider,{value:{user:t,login:e=>{},logout:()=>{}},children:e})},c=i},6021:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(8732),s=a(2015);a(7623);let n=()=>{let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[i,l]=(0,s.useState)("");return(0,s.useEffect)(()=>{(async()=>{n(!0),l("");let e=localStorage.getItem("token");try{let a=await fetch("http://localhost:5000/api/leaderboard",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){let e=await a.text();throw Error(`HTTP ${a.status}: ${e}`)}let r=await a.json();r.success?t(r.leaderboard||[]):l(r.message||"Failed to load leaderboard.")}catch(e){l(e.message||"Error fetching leaderboard.")}finally{n(!1)}})()},[]),(0,r.jsxs)("div",{className:"leaderboard-container",children:[(0,r.jsx)("h2",{children:"Leaderboard"}),i&&(0,r.jsx)("p",{className:"error-text",children:i}),a?(0,r.jsx)("p",{children:"Loading leaderboard..."}):(0,r.jsxs)("table",{className:"leaderboard-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Rank"}),(0,r.jsx)("th",{children:"Username"}),(0,r.jsx)("th",{children:"Balance"}),(0,r.jsx)("th",{children:"Wins"}),(0,r.jsx)("th",{children:"Losses"})]})}),(0,r.jsx)("tbody",{children:e.length>0?e.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:["#",t+1]}),(0,r.jsx)("td",{children:e.username}),(0,r.jsxs)("td",{children:["$",e.balance.toFixed(2)]}),(0,r.jsx)("td",{children:e.totalWins}),(0,r.jsx)("td",{children:e.totalLosses})]},e.username||t)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",children:"No leaderboard data available."})})})]})]})}},7623:()=>{},7910:e=>{"use strict";e.exports=require("stream")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},8981:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{j:()=>o});var s=a(8732);a(2015);var n=a(977),i=a(656),l=a(9190),c=e([n,i,l]);[n,i,l]=c.then?(await c)():c;let o=({children:e})=>{let t=(0,n.createConfig)({chains:[i.mainnet],connectors:[(0,l.injected)()],transports:{[i.mainnet.id]:(0,n.http)()}});return(0,s.jsx)(n.WagmiProvider,{config:t,children:e})};r()}catch(e){r(e)}})},9021:e=>{"use strict";e.exports=require("fs")},9190:e=>{"use strict";e.exports=import("wagmi/connectors")},9542:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>c});var s=a(8732);a(3959);var n=a(5240),i=a(8981),l=e([i]);i=(l.then?(await l)():l)[0];let c=function({Component:e,pageProps:t}){return(0,s.jsx)(n.O,{children:(0,s.jsx)(i.j,{children:(0,s.jsx)(e,{...t})})})};r()}catch(e){r(e)}})},9915:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>h,getServerSideProps:()=>p,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>y,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>b});var s=a(3885),n=a(237),i=a(1413),l=a(8548),c=a.n(l),o=a(9542),u=a(2960),d=e([o,u]);[o,u]=d.then?(await d)():d;let h=(0,i.M)(u,"default"),x=(0,i.M)(u,"getStaticProps"),m=(0,i.M)(u,"getStaticPaths"),p=(0,i.M)(u,"getServerSideProps"),g=(0,i.M)(u,"config"),j=(0,i.M)(u,"reportWebVitals"),b=(0,i.M)(u,"unstable_getStaticProps"),P=(0,i.M)(u,"unstable_getStaticPaths"),f=(0,i.M)(u,"unstable_getStaticParams"),S=(0,i.M)(u,"unstable_getServerProps"),v=(0,i.M)(u,"unstable_getServerSideProps"),y=new s.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/game",pathname:"/game",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:u});r()}catch(e){r(e)}})}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[709,233,548],()=>a(9915));module.exports=r})();